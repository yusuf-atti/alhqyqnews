// ملف: app.js
// ... (في قسم الدوال المساعدة) ...

/**
 * دالة اقتراح التصنيف الذكي (Smart Category Suggestion)
 * تعتمد على مطابقة الكلمات المفتاحية لتحديد القسم الأنسب.
 * @param {string} title - عنوان المقال.
 * @param {string} content - محتوى المقال.
 * @returns {string} - القسم المقترح (مثل 'investigations', 'community', أو 'general').
 */
function suggestCategory(title, content) {
    // توحيد النص للتحليل (تحويل إلى حروف صغيرة وإزالة الفواصل)
    const text = (title + " " + content).toLowerCase();
    
    let suggestedCategory = 'general'; // القسم الافتراضي (عام)
    let score = 0; // درجة مطابقة الكلمات المفتاحية

    // 1. تعريف الكلمات المفتاحية لكل قسم
    const categoryKeywords = {
        'investigations': [
            'تحقيق', 'تقرير', 'تلاعب', 'كشف', 'فساد', 'وثائق', 'حصرية', 'سرية'
        ],
        'community': [
            'مجتمع', 'سكان', 'حي', 'مبادرة', 'جمعية', 'تطوع', 'تنمية', 'بلدية', 'مدينة'
        ],
        'latest': [
            'عاجل', 'طارئ', 'تصريح', 'قرارات', 'أوامر', 'اجتماع', 'بيان', 'فوري'
        ]
    };

    // 2. حساب درجة المطابقة
    for (const categoryId in categoryKeywords) {
        let currentScore = 0;
        categoryKeywords[categoryId].forEach(keyword => {
            // التحقق من وجود الكلمة المفتاحية في النص
            if (text.includes(keyword)) {
                currentScore += 1; // زيادة الدرجة
            }
        });

        // 3. اختيار القسم صاحب أعلى درجة مطابقة
        if (currentScore > score) {
            score = currentScore;
            suggestedCategory = categoryId;
        }
    }

    // إذا لم تتجاوز أي درجة حد أدنى معين، يمكن إرجاع الافتراضي
    if (score === 0) {
        return 'general';
    }

    return suggestedCategory;
}


// اختبار الدالة (يمكنك وضعه مؤقتاً في app.js لمشاهدة النتائج في Console)
/*
console.log("مقترح تحقيق:", suggestCategory("كشف تلاعب في عقود المدينة", "هذا تحقيق حصري...")); // يتوقع 'investigations'
console.log("مقترح مجتمع:", suggestCategory("مبادرة لتنظيف حي الشروق", "نظم سكان المدينة...")); // يتوقع 'community'
*/
