// ============================
//  محرّك صحيفة الحقيقة
// ============================

// قاعدة بيانات تجريبية للأخبار (سيتم استبدالها لاحقًا)
const newsData = [
    {
        id: 1,
        title: "ارتفاع أسعار الطاقة عالميًا",
        content: "تشهد أسواق الطاقة موجة ارتفاع جديدة...",
        category: "general",
    },
    {
        id: 2,
        title: "مبادرة شبابية لتنظيف الأحياء",
        content: "أطلق مجموعة من المتطوعين...",
        category: "community",
    }
];

// ============================
//  التصنيف الذكي
// ============================

function suggestCategory(title, content) {

    const text = (title + " " + content).toLowerCase();
    let suggestedCategory = "general";
    let score = 0;

    const categoryKeywords = {
        investigations: ["تحقيق", "تقرير", "كشف", "فساد", "وثائق"],
        community: ["مجتمع", "سكان", "حي", "مبادرة", "تطوع", "تنمية"],
        latest: ["عاجل", "طارئ", "تصريح", "قرارات", "اجتماع"]
    };

    for (const cat in categoryKeywords) {
        let current = 0;
        categoryKeywords[cat].forEach(word => {
            if (text.includes(word)) current++;
        });

        if (current > score) {
            score = current;
            suggestedCategory = cat;
        }
    }

    return suggestedCategory;
}

// ============================
//  عرض الأخبار
// ============================

function renderNews() {
    const container = document.getElementById("news-container");
    if (!container) return;

    container.innerHTML = "";

    newsData.forEach(post => {
        const div = document.createElement("div");

        const category = suggestCategory(post.title, post.content);

        div.className = "glass p-4 rounded-xl cursor-pointer hover:bg-white/10 transition";

        div.onclick = () => openArticleModal(post);

        div.innerHTML = `
            <h2 class="text-xl font-bold mb-2">${post.title}</h2>
            <p class="text-gray-400 text-sm mb-2">${post.content.substring(0, 80)}...</p>
            <span class="text-yellow-400 text-xs font-bold">${category}</span>
        `;

        container.appendChild(div);
    });
}

document.addEventListener("DOMContentLoaded", () => {
    renderNews();
});
